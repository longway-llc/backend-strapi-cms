FROM strapi/base

WORKDIR /srv/app

ARG env-file=.env.production
ENV NODE_ENV=production
ENV EMAIL_CLIENT_ID="111064342884762132928"
ENV EMAIL_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQC95XWS3GKkjFFP\nefSTUFfRlZvBD1XlVzjBwA7i1bFr6Z7MYveheQNdClRmuyDjegcjUij1erEdMKyT\nPAcHWzL5apgc5p30Y7rcMwUk6rUK4chPTf0yf8nQDVub8/jPqQWXq7Jm8S93MUEj\nPFQGsNyebUTOG6JpYj3JC3Tbz15oKuM3k099GARjaH1pB2CPP0IiGQk9c+KBD4XG\nwqH7lveTkrHCH5sov9mau/80Z6Bc0ggGfbimHPNqBMNyzxOk0PYVWrf7m0UM8ccP\nGv9Pjf3EZijSr9umSycC8k1+IHjdiHFcxSPBw/VcSLKQ9YqDCGe4sW0V2nhd7WMW\n5SlcIdxJAgMBAAECggEAMh1Nx4m40KMlTDuro3r3Ch0ZAzy4VvOLS3qTkyKBFbEM\nUvUlU+xbSmERACGPXukT3CrxG0ObXVA8owia9EKJs9ABP9NOyTHOnREr4N++Epae\nZet3kC2wRWNZE1GyDp+VFb9esBMjiymo/pMLu85OEtNUbq5VUMl388g9uUrDJ+sA\nxwP2a44oh0R8/p5GWYJmKiS51IhflQ/f3ZdpYIP6Z1EfA5csacPwwYpb9XppiN/N\nHXMyvx7vIHSkkT16fhdTU91BXb89R+I9EuQvWpfelT1VOIB0ldYzVFGS8d8byxOZ\nvOqURJGwi3bmSdYOeu+rqT6t/diosKosS6x0JU3z3wKBgQDwbbsjBRwh9huqS/1s\nMMWemnsy4IXqWc8nR+LOT0RWyx0AyJ67t9S04tqYsh1A1c0vcZVaV/s3/eaA8H9U\nNnFgSaMXC+h819UoQQX3JKiJXznNAWNqS1MDk65l+jVzVjNUI2PRkuqXxu/TfER7\npfB8/nksFBDajwpHH4L8UGtZqwKBgQDKMekV3dE9cVVRHgqZUhFaGyjvaSj3cZ1x\nOFVfrLADHNmvg3c8qX3/H2aVrSwn1vyWQJQlDFJK1COxDlkiyveTcIQygmjew2Bh\n5Q7GTdMbBZu/i54lX+5UduWZkFXz7yya51wybJJ26ffnHVSj1XYEKGAJdr1cN75G\ntULnKfN12wKBgBUdzh3ZSQtCjlN6sRtbfT/c2Y0yYxCeKq+MhMMR+zKUTEvRUv+x\nuaDZe9GFc0RKgubz1uZEa/ATALe6Z7SBw5ttXEGd7iFo43PRojB+q77E+lKjGJQx\nYW0i/2I9g4xJueBd61pwyOHjuxScCXfCr0iLISFZ8dEAVyq//cUjWwpZAoGBAIBm\nZZBfRorwN6/FlhF7Tk2cRciTTVKlsce+cGjLbxLq9UpCACxjrgGfXTPbvtil6802\nwV0tj+y4/tlnNS+lGMdmgmzY5+PeyowgO9uufEsCqr9e2FT/sIeu4Ws9f3fjAL52\nAdR7oh8lwSnhNGi+G63UPfiEkQfI1mpsnUnTGCpVAoGBAMXCCxoOeVQaXrnHwTvg\nZi/eEUN5s+qmj2y+xGH3ZtZrWP5i35WnIF+6BsAGoz9ZFxY8fIMuJPMGmqm41nd9\nTews6+FpZDE6tDCgA8fMMRt8xmjCqALXJuJo78NnW+c7LU0Wr14Hf1l+K4nuoHLX\niyCwBp6m2dzEXoKJZ1U4FVrG\n-----END PRIVATE KEY-----\n"

EXPOSE 1337

COPY /app/package*.json .

RUN yarn

COPY /app .

RUN yarn build